(function(e){function t(t){for(var o,i,n=t[0],c=t[1],l=t[2],h=0,d=[];h<n.length;h++)i=n[h],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&d.push(r[i][0]),r[i]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(e[o]=c[o]);m&&m(t);while(d.length)d.shift()();return a.push.apply(a,l||[]),s()}function s(){for(var e,t=0;t<a.length;t++){for(var s=a[t],o=!0,i=1;i<s.length;i++){var n=s[i];0!==r[n]&&(o=!1)}o&&(a.splice(t--,1),e=c(c.s=s[0]))}return e}var o={},i={app:0},r={app:0},a=[];function n(e){return c.p+"js/"+({about:"about",cmLoader:"cmLoader",contribute:"contribute",results:"results"}[e]||e)+".js"}function c(t){if(o[t])return o[t].exports;var s=o[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,c),s.l=!0,s.exports}c.e=function(e){var t=[],s={about:1,cmLoader:1,results:1};i[e]?t.push(i[e]):0!==i[e]&&s[e]&&t.push(i[e]=new Promise((function(t,s){for(var o="css/"+({about:"about",cmLoader:"cmLoader",contribute:"contribute",results:"results"}[e]||e)+".css",r=c.p+o,a=document.getElementsByTagName("link"),n=0;n<a.length;n++){var l=a[n],h=l.getAttribute("data-href")||l.getAttribute("href");if("stylesheet"===l.rel&&(h===o||h===r))return t()}var d=document.getElementsByTagName("style");for(n=0;n<d.length;n++){l=d[n],h=l.getAttribute("data-href");if(h===o||h===r)return t()}var m=document.createElement("link");m.rel="stylesheet",m.type="text/css",m.onload=t,m.onerror=function(t){var o=t&&t.target&&t.target.src||r,a=new Error("Loading CSS chunk "+e+" failed.\n("+o+")");a.code="CSS_CHUNK_LOAD_FAILED",a.request=o,delete i[e],m.parentNode.removeChild(m),s(a)},m.href=r;var u=document.getElementsByTagName("head")[0];u.appendChild(m)})).then((function(){i[e]=0})));var o=r[e];if(0!==o)if(o)t.push(o[2]);else{var a=new Promise((function(t,s){o=r[e]=[t,s]}));t.push(o[2]=a);var l,h=document.createElement("script");h.charset="utf-8",h.timeout=120,c.nc&&h.setAttribute("nonce",c.nc),h.src=n(e);var d=new Error;l=function(t){h.onerror=h.onload=null,clearTimeout(m);var s=r[e];if(0!==s){if(s){var o=t&&("load"===t.type?"missing":t.type),i=t&&t.target&&t.target.src;d.message="Loading chunk "+e+" failed.\n("+o+": "+i+")",d.name="ChunkLoadError",d.type=o,d.request=i,s[1](d)}r[e]=void 0}};var m=setTimeout((function(){l({type:"timeout",target:h})}),12e4);h.onerror=h.onload=l,document.head.appendChild(h)}return Promise.all(t)},c.m=e,c.c=o,c.d=function(e,t,s){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(c.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)c.d(s,o,function(t){return e[t]}.bind(null,o));return s},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="",c.oe=function(e){throw console.error(e),e};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],h=l.push.bind(l);l.push=t,l=l.slice();for(var d=0;d<l.length;d++)t(l[d]);var m=h;a.push([0,"chunk-vendors"]),s()})({0:function(e,t,s){e.exports=s("56d7")},1:function(e,t){},"2e4a":function(e,t,s){},"2f3e":function(e,t,s){},3243:function(e,t,s){},3743:function(e,t,s){},"3a6a":function(e,t,s){"use strict";var o=s("8c3e"),i=s.n(o);i.a},"3f7e":function(e,t,s){"use strict";var o=s("c177"),i=s.n(o);i.a},"3fc2":function(e,t,s){},"56d7":function(e,t,s){"use strict";s.r(t);var o=s("2b0e"),i=s("f87c"),r=s("8055"),a=s.n(r),n=s("ecee"),c=s("ad3d"),l=s("c074"),h=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{ref:"app",attrs:{id:"app"}},[e.tooSmall?s("SmallScreen"):[s("aside",{ref:"navLeft",staticClass:"nav-left",class:{thin:e.isPlaying,wide:e.room.connected}},[s("NavBar",{class:[{thin:e.isPlaying}],on:{start:function(t){return e.$children[1].run()}}})],1),s("main",[s("keep-alive",{attrs:{exclude:["Run","Results"]}},[s("router-view")],1)],1)]],2)},d=[],m=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("nav",[s("button",{staticClass:"title",on:{click:e.mainPage}},[e._v(" CodeRush "),s("span",{staticClass:"beta"},[e._v("BETA")])]),s("div",{staticClass:"links",class:{"room-connected":e.room.connected}},[s("button",{staticClass:"link",on:{click:function(t){return e.mainPage(!0)}}},[s("fa",{class:{flip:"/run"===e.$route.path},attrs:{icon:["fas","play"]}}),s("span",{staticClass:"btn-text"},[e._v(" Start ")])],1),s("div",{staticClass:"line"}),s("button",{staticClass:"link language",on:{click:function(t){return e.$store.commit("USER_LANGUAGE")}}},[s("fa",{directives:[{name:"show",rawName:"v-show",value:e.userLanguage,expression:"userLanguage"}],attrs:{icon:["fas","globe-americas"]}}),s("fa",{directives:[{name:"show",rawName:"v-show",value:!e.userLanguage,expression:"!userLanguage"}],attrs:{icon:["fas","globe-europe"]}}),s("span",{staticClass:"btn-text"},[e._v(" "+e._s(e.userLanguage?"English Here":"Polska wersja")+" ")])],1),s("div",{staticClass:"line"}),s("router-link",{staticClass:"link",attrs:{to:"/about"}},[s("fa",{attrs:{icon:["fas","info"]}}),s("span",{staticClass:"btn-text"},[e._v(" About ")])],1),s("div",{staticClass:"line"}),s("router-link",{staticClass:"link",attrs:{to:"/contribute"}},[s("fa",{attrs:{icon:["fas","file-code"]}}),s("span",{staticClass:"btn-text"},[e._v(" Contribute ")])],1)],1),s("RoomPanel",{staticClass:"room"}),s("div",{staticClass:"author"},[s("span",{staticClass:"author-text"},[e._v(" Made with "),s("fa",{staticClass:"heart",attrs:{icon:["fas","heart"]}}),e._v(" by "),s("span",{staticClass:"author-name"},[e._v("Łukasz Wielgus")])],1)])],1)},u=[],p=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"room"},[s("div",{directives:[{name:"show",rawName:"v-show",value:!e.room.connected,expression:"!room.connected"}],staticClass:"roomNotConnected"},[s("p",{staticClass:"room-text"},[e._v(" Play with your friends: ")]),s("div",{staticClass:"roomName"},[s("fa",{attrs:{icon:["fas","server"]}}),s("input",{directives:[{name:"model",rawName:"v-model",value:e.roomName,expression:"roomName"}],attrs:{maxlength:"14",type:"text",placeholder:"Room name"},domProps:{value:e.roomName},on:{input:[function(t){t.target.composing||(e.roomName=t.target.value)},e.resetInfoMsg],keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleEnter(t)}}})],1),s("div",{directives:[{name:"show",rawName:"v-show",value:e.roomName,expression:"roomName"}],staticClass:"buttons"},[s("button",{attrs:{disabled:""===e.roomName},on:{click:function(t){return e.checkRoom("create")}}},[s("span",{staticClass:"btn-text"},[e._v(" Create ")])]),s("button",{attrs:{disabled:""===e.roomName},on:{click:function(t){return e.checkRoom("join")}}},[s("span",{staticClass:"btn-text"},[e._v(" Connect ")])])]),s("div",{directives:[{name:"show",rawName:"v-show",value:e.askForPlayerName,expression:"askForPlayerName"}],staticClass:"nick-actions",class:{popUp:e.popUp,"hide-popUp":e.hidePopUp}},[s("div",{staticClass:"wrapper"},[s("h2",{directives:[{name:"show",rawName:"v-show",value:e.popUp,expression:"popUp"}]},[e._v(" Enter a username to continue ")]),s("div",{staticClass:"playerName"},[s("fa",{attrs:{icon:["fas","user"]}}),s("input",{directives:[{name:"model",rawName:"v-model",value:e.playerName,expression:"playerName"}],ref:"playerNameInput",attrs:{maxlength:"14",type:"text",placeholder:"Nick"},domProps:{value:e.playerName},on:{input:[function(t){t.target.composing||(e.playerName=t.target.value)},e.resetInfoMsg],keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleEnter(t)}}})],1),s("div",{staticClass:"buttons"},[s("button",{directives:[{name:"show",rawName:"v-show",value:"create"===e.action,expression:"action === 'create'"}],attrs:{disabled:!e.playerName},on:{click:e.createRoom}},[s("span",{staticClass:"btn-text"},[e._v(" Ok ")])]),s("button",{directives:[{name:"show",rawName:"v-show",value:"join"===e.action,expression:"action === 'join'"}],attrs:{disabled:""===e.playerName},on:{click:e.checkPlayerName}},[s("span",{staticClass:"btn-text"},[e._v(" Join room ")])]),s("button",{directives:[{name:"show",rawName:"v-show",value:!e.popUp,expression:"!popUp"}],on:{click:function(t){return e.disconnect()}}},[s("span",{staticClass:"btn-text"},[e._v(" Close ")])])])])]),e.roomInfoMsg?s("p",{staticClass:"info"},[e._v(" "+e._s(e.roomInfoMsg)+" ")]):e._e()]),s("div",{directives:[{name:"show",rawName:"v-show",value:e.room.connected,expression:"room.connected"}],staticClass:"roomConnected"},[s("div",{staticClass:"roomNameContainer"},[s("h2",[e._v(e._s(e.room.name))]),s("button",{staticClass:"disconnect-btn",on:{click:function(t){return e.disconnect(!0)}}},[s("fa",{attrs:{icon:["fas","sign-out-alt"],size:"lg"}})],1)]),e.room.owner&&e.showRoomLink?s("div",{staticClass:"popUp"},[s("p",[e._v(" Share this link with other players: ")]),s("div",{staticClass:"shareLink"},[s("button",{staticClass:"copy-btn",on:{click:e.copy}},[s("fa",{attrs:{icon:["fas","copy"]}})],1),s("input",{ref:"shareLink",attrs:{type:"text",readonly:""},domProps:{value:e.origin+"/join/"+e.roomName}})]),s("button",{ref:"closeInfoBtn",staticClass:"close-btn",on:{click:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;e.showRoomLink=!1}}},[s("span",{staticClass:"btn-text"},[e._v(" Close ")])])]):e._e(),e.room.connected&&"/run"!==e.$route.path?s("PlayersList"):e._e()],1)])},y=[],f=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("h4",{staticClass:"players-count"},[e._v(" "+e._s(1===Object.keys(e.room.players).length?"1 player":Object.keys(e.room.players).length+" players")+" ")]),s("ol",e._l(e.sortedPlayers,(function(t){return s("li",{key:t.name},[s("span",{class:{owner:t.owner,me:t.name===e.room.myName&&!e.room.owner,winner:t.name===e.room.winner}},[e._v(e._s(t.name)+e._s(t.name===e.room.myName?" (You)":"")+" "+e._s(t.ready&&t.connected?"✔":"")+" "+e._s(t.connected?"🌐":"❎"))]),"/results"===e.$route.path?s("span",[e._v(e._s(t.stats.time)+"s "+e._s(t.stats.wpm)+" WPM")]):e._e()])})),0)])},C=[],g=s("2f62"),k={name:"PlayersList",computed:{...Object(g["b"])(["room","players"]),playersArray(){return console.warn(this.players),Object.entries(this.players).map(([e,t])=>({name:e,...t}))},sortedPlayers(){return console.warn("update sortedPlayers"),"/results"===this.$route.path?(console.log("results path"),this.playersArray.filter(e=>e.stats).sort((e,t)=>e.time>t.time?1:-1)):this.playersArray}},methods:{}},x=k,v=(s("b341"),s("2877")),b=Object(v["a"])(x,f,C,!1,null,"2892573a",null),_=b.exports,T={name:"RoomPanel",components:{PlayersList:_},data(){return{roomName:"",playerName:"",roomInfoMsg:"",action:"",showRoomCreator:!1,showRoomLink:!0,askForPlayerName:!1,origin:window.location.origin,popUp:!1,hidePopUp:!1}},computed:{...Object(g["b"])(["room","options","language"])},sockets:{connect(){this.resetInfoMsg(),console.warn("connected")},room_created(){this.$store.commit("SET_ROOM_PROPERTY",["connected",!0]),this.$store.commit("SET_ROOM_PROPERTY",["name",this.roomName]),this.$store.commit("SET_ROOM_PROPERTY",["myName",this.playerName]),this.$store.commit("SET_ROOM_PROPERTY",["ownerName",this.playerName]),this.$store.commit("SET_ROOM_PROPERTY",["owner",!0]),this.$store.commit("SET_ROOM_PROPERTY",["players",{[this.playerName]:{connected:!0,ready:!0,owner:!0}}]),setTimeout(()=>this.$refs.closeInfoBtn.focus(),100)},room_exist(){"create"===this.action?(console.error("ROOM ALREADY EXIST"),this.roomInfoMsg=`Room "${this.roomName}" already exists.`,this.disconnect()):(this.askForPlayerName=!0,setTimeout(()=>this.$refs.playerNameInput.focus(),100))},room_dont_exist(){"create"===this.action?(this.askForPlayerName=!0,setTimeout(()=>this.$refs.playerNameInput.focus(),100)):(console.error("ROOM DONT EXIST"),this.roomInfoMsg=`Room "${this.roomName}" doesn't exist.`,this.disconnect())},player_name_avaible(){this.$store.commit("SET_ROOM_PROPERTY",["myName",this.playerName]),this.joinRoom()},player_name_taken(){console.error("PLAYER NAME TAKEN"),this.roomInfoMsg=`Nick "${this.playerName}" is already taken.`}},mounted(){this.$route.params.roomName&&(this.roomName=this.$route.params.roomName,this.popUp=!0,this.checkRoom("join"),this.$router.push("/"))},methods:{handleEnter(){this.askForPlayerName?"create"===this.action?this.createRoom():this.checkPlayerName():this.checkRoom("create")},checkRoom(e){this.action=e,this.$socket.client.io.opts.query={roomName:this.roomName},this.$socket.client.open()},createRoom(){this.$socket.client.emit("createRoom",{ownerName:this.playerName,roomName:this.roomName,options:{codeLength:this.options.codeLength,autoIndent:this.options.autoIndent},languageIndex:this.language.index}),this.showRoomLink=!0},checkPlayerName(){this.$socket.client.emit("checkPlayerName",this.playerName)},joinRoom(){this.$socket.client.emit("joinRoom"),this.askForPlayerName=!1,this.hidePopUp=!0,setTimeout(()=>{this.popUp=!1},500)},disconnect(e=!1){this.$socket.client.close(),this.$store.commit("SET_ROOM_PROPERTY",["connected",!1]),this.$store.commit("SET_ROOM_PROPERTY",["name",""]),this.$store.commit("SET_ROOM_PROPERTY",["owner",!1]),e?(this.askForPlayerName=!1,this.roomName=""):this.askForPlayerName=!1},copy(){console.log(this.$refs.shareLink),this.$refs.shareLink.select(),document.execCommand("copy"),console.log("copied")},resetInfoMsg(){this.roomInfoMsg=""}}},w=T,E=(s("7629"),Object(v["a"])(w,p,y,!1,null,"7610ead2",null)),N=E.exports,L={name:"NavBar",components:{RoomPanel:N},computed:{...Object(g["b"])(["room","language","userLanguage"])},methods:{mainPage(){"/"===this.$route.path?this.language.name&&!this.room.connected&&this.$emit("start"):this.room.owner?(this.$socket.client.emit("reset"),this.$router.push("/")):this.$router.push("/")}}},O=L,R=(s("61dc"),Object(v["a"])(O,m,u,!1,null,"7f714fa1",null)),S=R.exports,P=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},$=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"container"},[s("div",[s("h2",[e._v("We detected unsupported screen resolution."),s("br"),s("br"),e._v("Please open this app on bigger screen (1920x1080)")])])])}],I={name:"SmallScreen"},A=I,M=Object(v["a"])(A,P,$,!1,null,"3a716888",null),U=M.exports,j={components:{NavBar:S,SmallScreen:U},computed:{...Object(g["b"])(["room","trackedContainers"]),tooSmall(){return window.innerWidth<640||window.innerHeight<480},isPlaying(){return"/run"===this.$route.path}},created(){this.$store.dispatch("loadLanguagesList")},mounted(){window.innerWidth>1300&&(document.addEventListener("mousemove",this.trackMouse),this.$store.commit("ADD_TRACKED_CONTAINER",this.$refs.navLeft))},methods:{trackMouse(e){this.rafActive||(this.rafActive=!0,requestAnimationFrame(()=>{this.rafActive=!1,this.trackedContainers.forEach(t=>{const s=t.getBoundingClientRect(),o=e.pageX-s.left,i=e.pageY-s.top;t.style.setProperty("--mouse-x",o+"px"),t.style.setProperty("--mouse-y",i+"px")})}))}}},D=j,F=(s("cf25"),Object(v["a"])(D,h,d,!1,null,null,null)),Y=F.exports,W=s("8c4f"),K=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"start",attrs:{tabindex:"0"},on:{"!keydown":function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleEnter(t)}}},[s("main",{staticClass:"middle"},[s("div",{ref:"scroll",staticClass:"upload-scroll"},[s("SettingsMenu",{ref:"settings",staticClass:"settings-menu"}),s("keep-alive",[e.showEditor?s("UploadCode",{ref:"code",staticClass:"code-editor"}):e._e()],1)],1),s("p",{directives:[{name:"show",rawName:"v-show",value:e.error,expression:"error"}],staticClass:"error"},[e._v(" "+e._s(e.error)+" ")]),s("div",{staticClass:"buttons-bottom"},[s("label",{staticClass:"button show-editor-btn"},[s("span",[e._v(e._s(e.uploadCodeText))]),s("input",{attrs:{disabled:e.room.connected&&!e.room.owner,type:"checkbox"},domProps:{checked:e.customCode.showEditor},on:{input:function(t){return e.useCustomCode(t.target.checked)}}})]),e.room.connected&&!e.room.owner?s("label",{staticClass:"button ready-btn",class:{highlight:e.isReady}},[s("span",[e._v("Ready")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.isReady,expression:"isReady"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.isReady)?e._i(e.isReady,null)>-1:e.isReady},on:{input:function(t){return e.ready(t.target.checked)},change:function(t){var s=e.isReady,o=t.target,i=!!o.checked;if(Array.isArray(s)){var r=null,a=e._i(s,r);o.checked?a<0&&(e.isReady=s.concat([r])):a>-1&&(e.isReady=s.slice(0,a).concat(s.slice(a+1)))}else e.isReady=i}}})]):e._e(),s("button",{staticClass:"button start-btn",class:{highlight:e.language.name},attrs:{disabled:e.room.connected&&!e.room.owner},on:{click:e.run}},[e._v(" START ")])])]),s("LanguagesList",{ref:"languagesList",staticClass:"languages-list"})],1)},z=[],B=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("main",{on:{"!input":function(t){return e.updateOption(t)}}},[s("h2",[e._v("How do you want to play?")]),s("p",{staticClass:"select-text"},[e._v(" Game mode ")]),s("div",{ref:"modesList",staticClass:"modes list"},e._l(e.modesList,(function(t,o){return s("label",{key:t[0],staticClass:"mode",class:{selected:o+1===e.selectedMode}},[s("h4",[e._v(e._s(t[0]))]),s("p",{staticClass:"modeDesc"},[e._v(e._s(t[1]))]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.selectedMode,expression:"selectedMode"}],attrs:{name:"mode",type:"radio"},domProps:{value:o+1,checked:e._q(e.selectedMode,o+1)},on:{change:function(t){e.selectedMode=o+1}}})])})),0),s("p",{staticClass:"select-text"},[e._v(" Source code theme ")]),s("div",{ref:"themesList",staticClass:"themes list"},e._l(e.themesList,(function(t){return s("label",{key:t[0],staticClass:"theme",class:{selected:t[0]===e.selectedTheme}},[s("h4",[e._v(e._s(t[1]))]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.selectedTheme,expression:"selectedTheme"}],attrs:{type:"radio"},domProps:{value:t[0],checked:e._q(e.selectedTheme,t[0])},on:{change:function(s){e.selectedTheme=t[0]}}})])})),0),s("div",{staticClass:"toggles"},[s("label",[s("span",[e._v("Highlight next character")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.underScore,expression:"underScore"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.underScore)?e._i(e.underScore,null)>-1:e.underScore},on:{change:function(t){var s=e.underScore,o=t.target,i=!!o.checked;if(Array.isArray(s)){var r=null,a=e._i(s,r);o.checked?a<0&&(e.underScore=s.concat([r])):a>-1&&(e.underScore=s.slice(0,a).concat(s.slice(a+1)))}else e.underScore=i}}}),s("div",{staticClass:"slider"})]),s("label",[s("span",[e._v("Auto-indent new line")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.autoIndent,expression:"autoIndent"}],attrs:{disabled:e.block,name:"autoIndent",type:"checkbox"},domProps:{checked:Array.isArray(e.autoIndent)?e._i(e.autoIndent,null)>-1:e.autoIndent},on:{change:function(t){var s=e.autoIndent,o=t.target,i=!!o.checked;if(Array.isArray(s)){var r=null,a=e._i(s,r);o.checked?a<0&&(e.autoIndent=s.concat([r])):a>-1&&(e.autoIndent=s.slice(0,a).concat(s.slice(a+1)))}else e.autoIndent=i}}}),s("div",{staticClass:"slider"})]),s("label",[s("span",[e._v("Only short levels")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.codeLength,expression:"codeLength"}],attrs:{disabled:e.block,name:"codeLength",type:"checkbox"},domProps:{checked:Array.isArray(e.codeLength)?e._i(e.codeLength,null)>-1:e.codeLength},on:{change:function(t){var s=e.codeLength,o=t.target,i=!!o.checked;if(Array.isArray(s)){var r=null,a=e._i(s,r);o.checked?a<0&&(e.codeLength=s.concat([r])):a>-1&&(e.codeLength=s.slice(0,a).concat(s.slice(a+1)))}else e.codeLength=i}}}),s("div",{staticClass:"slider"})]),s("label",[s("span",[e._v("Show line numbers")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.lineNumbers,expression:"lineNumbers"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.lineNumbers)?e._i(e.lineNumbers,null)>-1:e.lineNumbers},on:{change:function(t){var s=e.lineNumbers,o=t.target,i=!!o.checked;if(Array.isArray(s)){var r=null,a=e._i(s,r);o.checked?a<0&&(e.lineNumbers=s.concat([r])):a>-1&&(e.lineNumbers=s.slice(0,a).concat(s.slice(a+1)))}else e.lineNumbers=i}}}),s("div",{staticClass:"slider"})])])])},Q=[],G=s("5935");const{mapFields:H}=Object(G["a"])({getterType:"getOption",mutationType:"UPDATE_OPTION"});var q={name:"SettingsMenu",data(){return{themesList:[["material-darker","Material Dark"],["one-dark","Atom One Dark"],["Base2Tone-Suburb-dark","Base2Tone Suburb Dark"],["","Plain white"]],modesList:[["Normal","Write down provided source code as quickly as you can."],["Hardcore","Just don't make any mistakes."],["CodeRush","See how much code you are able to write in 100 seconds"]]}},computed:{...Object(g["b"])(["room","customCode"]),...H(["selectedTheme","selectedMode","underScore","codeLength","lineNumbers","autoIndent"]),block(){return this.room.connected&&!this.room.owner}},activated(){this.$store.commit("ADD_TRACKED_CONTAINER",this.$refs.modesList),this.$store.commit("ADD_TRACKED_CONTAINER",this.$refs.themesList)},deactivated(){this.$store.commit("REMOVE_TRACKED_CONTAINER",this.$refs.modesList.className),this.$store.commit("REMOVE_TRACKED_CONTAINER",this.$refs.themesList.className)},methods:{updateOption(e){this.room.owner&&e.target.name&&this.$socket.client.emit("optionChange",{name:e.target.name,value:e.target.checked})}}},J=q,V=(s("3a6a"),Object(v["a"])(J,B,Q,!1,null,"7a2cc102",null)),X=V.exports,Z=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{staticClass:"search"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.searchText,expression:"searchText"}],staticClass:"searchInput",attrs:{type:"text",placeholder:"Search",maxlength:"12",autofocus:""},domProps:{value:e.searchText},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.stopPropagation(),e.selectFirstFromSearch(t))},input:function(t){t.target.composing||(e.searchText=t.target.value)}}}),s("div",[s("span",{directives:[{name:"show",rawName:"v-show",value:e.searchText&&e.filteredList.length===e.languagesList.length,expression:"searchText && filteredList.length === languagesList.length"}],staticClass:"nothing-found-text"},[e._v("(nothing found)")]),s("button",{directives:[{name:"show",rawName:"v-show",value:e.searchText,expression:"searchText"}],staticClass:"clear-btn",on:{click:e.clear}},[e._v(" Clear ")])])]),s("div",{ref:"languagesList",staticClass:"languages list"},[s("button",{staticClass:"language random",class:{selected:null===e.language.index},attrs:{disabled:e.room.connected&&!e.room.owner},on:{click:e.selectRandom}},[e._v(" Random ")]),e._l(e.filteredList,(function(t,o){return s("label",{key:"Loading..."===t.name?o:t.name,staticClass:"language",class:{selected:e.language.index===t.index}},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.language,expression:"language"}],staticClass:"language-radio",attrs:{type:"radio",disabled:e.room.connected&&!e.room.owner,index:t.index},domProps:{value:e.languagesList[t.index],checked:e._q(e.language,e.languagesList[t.index])},on:{input:e.setRoomLanguage,change:function(s){e.language=e.languagesList[t.index]}}}),s("span",{staticClass:"language-name"},[e._v(e._s(t.name.replace("_"," ")))]),s("span",{staticClass:"stat"},[s("span",[e._v("24")]),s("fa",{staticClass:"icon",attrs:{icon:["fas","users"]}})],1)])}))],2)])},ee=[];const{mapFields:te}=Object(G["a"])({getterType:"getLanguage",mutationType:"UPDATE_LANGUAGE"});var se={data(){return{searchText:""}},computed:{...Object(g["b"])(["languagesList","room"]),...te(["language"]),filteredList(){if(this.languagesList.length){const e=this.searchText.toLowerCase(),t=this.languagesList.filter(t=>t.name.toLowerCase().includes(e)).sort((t,s)=>s.name.toLowerCase().startsWith(e)?1:-1);return t.length>0?t:this.languagesList}return[...Array(29)].map(()=>({name:"Loading..."}))}},activated(){this.$store.commit("ADD_TRACKED_CONTAINER",this.$refs.languagesList)},deactivated(){this.$store.commit("REMOVE_TRACKED_CONTAINER",this.$refs.languagesList.className)},methods:{clear(){this.searchText=""},selectRandom(){const e=Math.floor(Math.random()*this.filteredList.length);this.filteredList[e].index===this.language.index&&this.filteredList.length>1?this.selectRandom():(this.language=this.filteredList[e],this.room.owner&&this.$socket.client.emit("languageChange",e))},selectFirstFromSearch(){console.green("ENTER"),0!==this.filteredList.length&&this.filteredList.length<this.languagesList.length?[this.language]=this.filteredList:this.clear()},setRoomLanguage(e){this.room.owner&&this.$nextTick(()=>this.$socket.client.emit("languageChange",e.target.getAttribute("index")))}}},oe=se,ie=(s("941e"),Object(v["a"])(oe,Z,ee,!1,null,"2b6d3ee5",null)),re=ie.exports,ae=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"wrapper"},[s("div",{staticClass:"warning"},[e.language.index?e._e():s("span",[e._v(" Choose language "),s("fa",{staticClass:"arrow",attrs:{icon:["fas","play"]}})],1)]),s("div",{staticClass:"settings"},["/contribute"===e.$route.path?s("div",{},[s("label",[e._v("Code functionality (or product name)")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.name,expression:"name"}],attrs:{type:"text"},domProps:{value:e.name},on:{input:function(t){t.target.composing||(e.name=t.target.value)}}})]):e._e(),s("div",{staticClass:"tab-settings"},[s("span",{staticClass:"tab-text"},[e._v("Tab size:")]),e._l(e.tabSizes,(function(t){return s("label",{key:t,staticClass:"tab-size-option",class:{selected:t===e.selectedSize}},[s("span",[e._v(e._s(t))]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.selectedSize,expression:"selectedSize"}],attrs:{type:"radio"},domProps:{value:t,checked:e._q(e.selectedSize,t)},on:{change:function(s){e.selectedSize=t}}})])}))],2),s("p",{directives:[{name:"show",rawName:"v-show",value:e.language.index&&!e.editorReady,expression:"language.index && !editorReady "}]},[e._v(" Loading... ")])]),s("codemirror",{ref:"codemirror",staticClass:"codemirror",class:{ready:e.editorReady},attrs:{options:e.cmOptions},on:{ready:e.onCmReady,input:e.useCustomCode},model:{value:e.code,callback:function(t){e.code=t},expression:"code"}}),"/contribute"===e.$route.path?s("div",{staticClass:"buttons"},[s("button",{on:{click:e.sendCustomCode}},[e._v(" Send ")])]):e._e()],1)},ne=[],ce=s("bc3a"),le=s.n(ce);let he,de;const me=()=>s.e("cmLoader").then(s.bind(null,"a0ca")).then(e=>(he=e.loadMode,de=e.loadTheme,e.default));var ue={name:"UploadCode",components:{codemirror:me},data(){return{code:"",confirmMsg:"",name:"",timeout:0,editorReady:!1,tabSizes:[2,4,8],selectedSize:2}},computed:{...Object(g["b"])(["room","languagesList","language"]),cmOptions(){return{tabSize:this.selectedSize,lineNumbers:!0,mathBrackets:!0,styleSelectedText:!0,styleActiveLine:!1,lineWrapping:!0,theme:"material-darker",viewportMargin:1/0}},numberOfLines(){return this.code.split(/\r\n|\r|\n/).length}},watch:{async language(){this.editorReady=!1,await he(this.cm,this.language.mode),console.green("watch"),this.editorReady=!0}},mounted(){console.log("Activated"),console.log(this.language.index),this.code&&this.useCustomCode()},methods:{onCmReady(e){console.log("cm ready"),this.cm=e,de(),this.language.name&&(he(this.cm,this.language.mode),this.editorReady=!0),e.focus(),this.fixHeight(),window.addEventListener("resize",this.fixHeight)},fixHeight(){this.timeout&&window.clearTimeout(this.timeout),this.timeout=window.setTimeout(()=>{const e=this.$refs.codemirror.$el.getElementsByClassName("CodeMirror-scroll")[0];console.log(this.$refs.codemirror.$el.offsetHeight),e.style.maxHeight=this.$refs.codemirror.$el.offsetHeight+"px",e.style.width=this.$refs.codemirror.$el.offsetWidth+"px"},100)},useCustomCode(){this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout(()=>{this.$store.commit("SET_CUSTOM_CODE",{text:this.code,tabSize:this.selectedSize,lines:this.numberOfLines,showEditor:!0})},600)},sendCustomCode(){if(this.numberOfLines>=5){const e={code:this.code,languageIndex:this.languageIndex,name:this.name?this.name:Math.floor(1e4*Math.random()),ext:this.currentLanguage.ext,tabSize:this.selectedSize,numberOfLines:this.numberOfLines},t=window.location.origin+"/upload";le.a.post(t,e).then(e=>{console.log(e)}).catch(e=>{console.warn(e)})}else console.log("CUSTOM CODE TOO SHORT"),this.confirmMsg="Code needs to be a little bit longer."}}},pe=ue,ye=(s("3f7e"),Object(v["a"])(pe,ae,ne,!1,null,"7bbbcaba",null)),fe=ye.exports,Ce={name:"Start",components:{SettingsMenu:X,LanguagesList:re,UploadCode:fe},data(){return{showEditor:!1,uploadCodeText:"Use your own code",error:"",isReady:!1}},computed:{...Object(g["b"])(["room","language","options","customCode"]),playersReady(){return Object.values(this.room.players).every(e=>e.ready)}},watch:{language(e,t){console.warn("watch"),console.log(t),t.index&&(this.error="")}},activated(){this.customCode.showEditor&&this.$refs.code.$refs.codemirror.$el.scrollIntoView({block:"start",inline:"nearest"})},methods:{handleEnter(){console.blue("ENTER")},useCustomCode(e){console.warn("usecustomcode",e),e?(this.showEditor=e,this.$store.commit("USE_CUSTOM_CODE",!0),setTimeout(()=>{this.$refs.code.$refs.codemirror.$el.scrollIntoView({block:"start",inline:"nearest",behavior:"smooth"})},30)):(this.error="",this.$store.dispatch("deleteCustomCode"),this.$refs.settings.$el.scrollIntoView({block:"start",inline:"nearest",behavior:"smooth"}),setTimeout(()=>{this.showEditor=e},500)),this.room.owner&&this.$socket.client.emit("useCustomCode",e),this.uploadCodeText=e?"Cancel":"Use your own code"},run(){if(this.language.name||this.$refs.languagesList.selectRandom(),!this.error){if(this.showEditor&&(this.customCode.text.length<30||this.customCode.lines<4))return void(this.error="Provided code is too short too produce accurate results.");if(this.room.connected&&!this.playersReady)return void(this.error="Some players aren't ready yet. Click again to ignore")}this.showEdiotr&&this.room.owner&&this.$socket.client.emit("customCodeData",this.customCode),this.prepareCodeInfo(),this.room.owner&&this.$socket.client.emit("start",Date.now()),window.location.hash||localStorage.getItem("myUniverse")?(localStorage.setItem("myUniverse",!0),this.$router.push("myuniverse")):this.$router.push("run")},ready(e){this.$socket.client.emit("playerStateChange",e)},prepareCodeInfo(){let e=-1;this.customCode.text||(e=Math.floor(Math.random()*this.language.files.length)),this.$store.dispatch("generateCodeInfo",e),this.room.owner&&this.$socket.client.emit("fileIndex",e)}},sockets:{start(e){this.$store.commit("LATENCY",e),this.$router.push("run")}}},ge=Ce,ke=(s("7447"),Object(v["a"])(ge,K,z,!1,null,"40614b6b",null)),xe=ke.exports,ve=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div")},be=[],_e={name:"PageNotFound",created(){this.$router.push("/")}},Te=_e,we=Object(v["a"])(Te,ve,be,!1,null,null,null),Ee=we.exports,Ne=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("main",{key:e.resetSelfKey,class:{wide:e.stats},on:{keydown:function(t){return t.altKey?e.resetSelf(t):null}}},[s("div",{staticClass:"top-bar"},[e.requestReset?[e._m(0),s("div",{staticClass:"buttons"},[s("button",{on:{click:function(t){return e.$router.push("/")}}},[e._v(" OK ")]),s("button",{staticClass:"disconnect-btn",on:{click:e.disconnect}},[e._v(" Leave room and stay here ")])])]:[s("div",{staticClass:"info"},[s("div",{staticClass:"languageName"},[s("h2",[e._v(e._s(e.languageName))])]),s("div",{staticClass:"codeInfo"},[e.codeInfo.name?s("p",[e._v(" "+e._s(e.codeInfo.name)+"."+e._s(e.language.ext)+" ")]):e._e(),s("p",[e._v(e._s(e.codeSource))])])]),s("div",{staticClass:"buttons"},[s("button",{staticClass:"reset",attrs:{disabled:e.room.connected},on:{click:e.reset}},[e._v(" Restart ")]),s("button",{directives:[{name:"show",rawName:"v-show",value:"/results"!==e.$route.path,expression:"$route.path !== '/results'"}],staticClass:"finish",attrs:{disabled:e.room.connected},on:{click:e.finish}},[e._v(" Finish now ")])])]],2),e.language.name?s("CodeEditor",{key:e.resetEditorKey,ref:"codeEditor",staticClass:"code-editor",on:{reset:e.reset,completed:e.completed}}):e._e(),s("div",{directives:[{name:"show",rawName:"v-show",value:"/results"===e.$route.path&&e.stats,expression:"$route.path === '/results' && stats"}],ref:"results",staticClass:"results"},[e.stats?s("Results",{attrs:{stats:e.stats}}):e._e()],1)],1)},Le=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"info"},[s("div",{staticClass:"codeInfo"},[s("h2",[e._v("Room owner wants to start a new game")]),s("p",[e._v("You will be moved to lobby")])])])}],Oe=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{ref:"code",staticClass:"code",class:{ready:e.cmReady,completed:e.isCompleted},on:{"!keydown":function(t){return t.preventDefault(),e.onKeyDown(t)}}},[s("codemirror",{ref:"codemirror",staticClass:"codemirror",class:{showInvisibles:"Whitespace"===e.language.name},attrs:{options:e.cmOptions},on:{ready:e.onCmReady,blur:e.onUnFocus},model:{value:e.codeText,callback:function(t){e.codeText=t},expression:"codeText"}}),s("div",{staticClass:"pop-up",class:{hidden:!e.showPopUp,clickable:e.popUpClickable,"small-font":e.popUpText.length>15}},[s("div",[s("h2",{on:{click:function(t){return e.popUp(!1)}}},[e._v(" "+e._s(e.popUpText)+" ")]),s("p",{directives:[{name:"show",rawName:"v-show",value:e.isCompleted,expression:"isCompleted"}]},[e._v(" Loading your results... ")])])])],1)},Re=[],Se={history:[{time:0,type:"correct",shift:!1,alt:!1,keyCode:78,text:"n"},{time:61,type:"correct",shift:!1,alt:!1,keyCode:85,text:"u"},{time:237,type:"correct",shift:!1,alt:!1,keyCode:77,text:"m"},{time:709,type:"correct",shift:!1,alt:!1,keyCode:32,text:" "},{time:789,type:"correct",shift:!1,alt:!1,keyCode:187,text:"="},{time:901,type:"correct",shift:!1,alt:!1,keyCode:32,text:" "},{time:1301,type:"correct",shift:!1,alt:!1,keyCode:65,text:"a"},{time:1405,type:"correct",shift:!1,alt:!1,keyCode:83,text:"s"},{time:1677,type:"correct",shift:!1,alt:!1,keyCode:190,text:"."},{time:1901,type:"correct",shift:!1,alt:!1,keyCode:73,text:"i"},{time:2005,type:"correct",shift:!1,alt:!1,keyCode:78,text:"n"},{time:2062,type:"correct",shift:!1,alt:!1,keyCode:84,text:"t"},{time:2159,type:"correct",shift:!1,alt:!1,keyCode:69,text:"e"},{time:2357,type:"correct",shift:!1,alt:!1,keyCode:71,text:"g"},{time:2501,type:"correct",shift:!1,alt:!1,keyCode:69,text:"e"},{time:2965,type:"correct",shift:!1,alt:!1,keyCode:82,text:"r"},{time:3269,type:"correct",shift:!0,alt:!1,keyCode:57,text:"("},{time:3573,type:"correct",shift:!1,alt:!1,keyCode:82,text:"r"},{time:3686,type:"correct",shift:!1,alt:!1,keyCode:69,text:"e"},{time:3757,type:"correct",shift:!1,alt:!1,keyCode:65,text:"a"},{time:3885,type:"correct",shift:!1,alt:!1,keyCode:68,text:"d"},{time:3997,type:"correct",shift:!1,alt:!1,keyCode:76,text:"l"},{time:4173,type:"correct",shift:!1,alt:!1,keyCode:73,text:"i"},{time:4238,type:"correct",shift:!1,alt:!1,keyCode:78,text:"n"},{time:4350,type:"correct",shift:!1,alt:!1,keyCode:69,text:"e"},{time:4509,type:"correct",shift:!0,alt:!1,keyCode:57,text:"("},{time:4742,type:"correct",shift:!1,alt:!1,keyCode:80,text:"p"},{time:4870,type:"correct",shift:!1,alt:!1,keyCode:82,text:"r"},{time:4966,type:"correct",shift:!1,alt:!1,keyCode:79,text:"o"},{time:5053,type:"correct",shift:!1,alt:!1,keyCode:77,text:"m"},{time:5189,type:"correct",shift:!1,alt:!1,keyCode:80,text:"p"},{time:5318,type:"correct",shift:!1,alt:!1,keyCode:84,text:"t"},{time:5558,type:"mistake",shift:!0,alt:!1,keyCode:187,fixQueuePos:1,expectedText:"=",text:"+"},{time:6238,type:"backspace",shift:!1,alt:!1,keyCode:8,fixQueuePos:0},{time:6494,type:"correct",shift:!1,alt:!1,keyCode:187,text:"="},{time:6942,type:"correct",shift:!0,alt:!1,keyCode:222,text:'"'},{time:7270,type:"correct",shift:!0,alt:!1,keyCode:69,text:"E"},{time:7462,type:"correct",shift:!1,alt:!1,keyCode:78,text:"n"},{time:7566,type:"correct",shift:!1,alt:!1,keyCode:84,text:"t"},{time:7670,type:"correct",shift:!1,alt:!1,keyCode:69,text:"e"},{time:7798,type:"correct",shift:!1,alt:!1,keyCode:82,text:"r"},{time:8086,type:"correct",shift:!1,alt:!1,keyCode:32,text:" "},{time:8262,type:"correct",shift:!1,alt:!1,keyCode:73,text:"i"},{time:8350,type:"correct",shift:!1,alt:!1,keyCode:78,text:"n"},{time:8454,type:"correct",shift:!1,alt:!1,keyCode:84,text:"t"},{time:8934,type:"correct",shift:!0,alt:!1,keyCode:186,text:":"},{time:9478,type:"correct",shift:!1,alt:!1,keyCode:32,text:" "},{time:10310,type:"mistake",shift:!1,alt:!1,keyCode:222,fixQueuePos:1,expectedText:'"',text:"'"},{time:10678,type:"mistake",shift:!0,alt:!1,keyCode:222,fixQueuePos:2,expectedText:")",text:'"'},{time:11158,type:"backspace",shift:!1,alt:!1,keyCode:8,fixQueuePos:1},{time:11504,type:"backspace",shift:!1,alt:!1,keyCode:8,fixQueuePos:0},{time:12071,type:"correct",shift:!0,alt:!1,keyCode:222,text:'"'},{time:12799,type:"correct",shift:!0,alt:!1,keyCode:48,text:")"},{time:13127,type:"correct",shift:!0,alt:!1,keyCode:48,text:")"},{time:13623,type:"correct",shift:!1,alt:!1,keyCode:13},{time:14095,type:"correct",shift:!1,alt:!1,keyCode:70,text:"f"},{time:14175,type:"correct",shift:!1,alt:!1,keyCode:65,text:"a"},{time:14311,type:"correct",shift:!1,alt:!1,keyCode:67,text:"c"},{time:14583,type:"correct",shift:!1,alt:!1,keyCode:84,text:"t"},{time:14663,type:"correct",shift:!1,alt:!1,keyCode:79,text:"o"},{time:14799,type:"correct",shift:!1,alt:!1,keyCode:82,text:"r"},{time:14919,type:"correct",shift:!1,alt:!1,keyCode:73,text:"i"},{time:15039,type:"correct",shift:!1,alt:!1,keyCode:65,text:"a"},{time:15167,type:"correct",shift:!1,alt:!1,keyCode:76,text:"l"},{time:15327,type:"correct",shift:!1,alt:!1,keyCode:32,text:" "},{time:15447,type:"correct",shift:!1,alt:!1,keyCode:187,text:"="},{time:15679,type:"correct",shift:!1,alt:!1,keyCode:32,text:" "},{time:15759,type:"mistake",shift:!1,alt:!1,keyCode:50,fixQueuePos:1,expectedText:"1",text:"2"},{time:16151,type:"backspace",shift:!1,alt:!1,keyCode:8,fixQueuePos:0},{time:16911,type:"correct",shift:!1,alt:!1,keyCode:49,text:"1"},{time:17359,type:"correct",shift:!1,alt:!1,keyCode:13},{time:17943,type:"correct",shift:!1,alt:!1,keyCode:73,text:"i"},{time:18039,type:"correct",shift:!1,alt:!1,keyCode:70,text:"f"},{time:18175,type:"mistake",shift:!1,alt:!1,keyCode:32,fixQueuePos:1,expectedText:"(",text:" "},{time:18391,type:"mistake",shift:!0,alt:!1,keyCode:57,fixQueuePos:2,expectedText:"n",text:"("},{time:18855,type:"backspace",shift:!1,alt:!1,keyCode:8,fixQueuePos:1},{time:18959,type:"backspace",shift:!1,alt:!1,keyCode:8,fixQueuePos:0},{time:19183,type:"correct",shift:!0,alt:!1,keyCode:57,text:"("},{time:19560,type:"mistake",shift:!1,alt:!1,keyCode:85,fixQueuePos:1,expectedText:"n",text:"u"},{time:19879,type:"backspace",shift:!1,alt:!1,keyCode:8,fixQueuePos:0},{time:20136,type:"correct",shift:!1,alt:!1,keyCode:78,text:"n"},{time:20224,type:"correct",shift:!1,alt:!1,keyCode:85,text:"u"},{time:20440,type:"correct",shift:!1,alt:!1,keyCode:77,text:"m"},{time:20608,type:"correct",shift:!1,alt:!1,keyCode:32,text:" "},{time:20760,type:"correct",shift:!0,alt:!1,keyCode:188,text:"<"},{time:21872,type:"correct",shift:!1,alt:!1,keyCode:32,text:" "},{time:22080,type:"correct",shift:!1,alt:!1,keyCode:48,text:"0"},{time:22656,type:"correct",shift:!0,alt:!1,keyCode:48,text:")"},{time:22888,type:"correct",shift:!1,alt:!1,keyCode:32,text:" "},{time:23208,type:"correct",shift:!0,alt:!1,keyCode:219,text:"{"},{time:23552,type:"correct",shift:!1,alt:!1,keyCode:13},{time:24080,type:"correct",shift:!1,alt:!1,keyCode:80,text:"p"},{time:24256,type:"correct",shift:!1,alt:!1,keyCode:82,text:"r"},{time:24408,type:"correct",shift:!1,alt:!1,keyCode:73,text:"i"},{time:24568,type:"correct",shift:!1,alt:!1,keyCode:78,text:"n"},{time:24712,type:"correct",shift:!1,alt:!1,keyCode:84,text:"t"},{time:25640,type:"correct",shift:!0,alt:!1,keyCode:57,text:"("},{time:26737,type:"correct",shift:!0,alt:!1,keyCode:222,text:'"'},{time:27321,type:"correct",shift:!0,alt:!1,keyCode:69,text:"E"},{time:27585,type:"correct",shift:!1,alt:!1,keyCode:82,text:"r"},{time:27745,type:"correct",shift:!1,alt:!1,keyCode:82,text:"r"},{time:27833,type:"correct",shift:!1,alt:!1,keyCode:79,text:"o"},{time:27938,type:"correct",shift:!1,alt:!1,keyCode:82,text:"r"},{time:28897,type:"correct",shift:!0,alt:!1,keyCode:186,text:":"},{time:29153,type:"correct",shift:!1,alt:!1,keyCode:32,text:" "},{time:29257,type:"correct",shift:!1,alt:!1,keyCode:77,text:"m"},{time:29441,type:"correct",shift:!1,alt:!1,keyCode:85,text:"u"},{time:29578,type:"correct",shift:!1,alt:!1,keyCode:83,text:"s"},{time:29777,type:"correct",shift:!1,alt:!1,keyCode:84,text:"t"},{time:29937,type:"correct",shift:!1,alt:!1,keyCode:32,text:" "},{time:30049,type:"correct",shift:!1,alt:!1,keyCode:66,text:"b"},{time:30193,type:"correct",shift:!1,alt:!1,keyCode:69,text:"e"},{time:30642,type:"correct",shift:!1,alt:!1,keyCode:32,text:" "},{time:31210,type:"correct",shift:!0,alt:!1,keyCode:187,text:"+"},{time:32258,type:"correct",shift:!0,alt:!1,keyCode:222,text:'"'},{time:33274,type:"mistake",shift:!0,alt:!1,keyCode:57,fixQueuePos:1,expectedText:")",text:"("},{time:33922,type:"backspace",shift:!1,alt:!1,keyCode:8,fixQueuePos:0},{time:34242,type:"correct",shift:!0,alt:!1,keyCode:48,text:")"},{time:34874,type:"correct",shift:!1,alt:!1,keyCode:13},{time:35994,type:"correct",shift:!0,alt:!1,keyCode:221,text:"}"},{time:36386,type:"correct",shift:!1,alt:!1,keyCode:13},{time:37642,type:"correct",shift:!1,alt:!1,keyCode:32,text:" "},{time:38267,type:"correct",shift:!1,alt:!1,keyCode:69,text:"e"},{time:38418,type:"correct",shift:!1,alt:!1,keyCode:76,text:"l"},{time:38579,type:"correct",shift:!1,alt:!1,keyCode:83,text:"s"},{time:38667,type:"correct",shift:!1,alt:!1,keyCode:69,text:"e"},{time:39211,type:"correct",shift:!1,alt:!1,keyCode:32,text:" "},{time:39699,type:"correct",shift:!1,alt:!1,keyCode:73,text:"i"},{time:39795,type:"correct",shift:!1,alt:!1,keyCode:70,text:"f"},{time:40851,type:"correct",shift:!0,alt:!1,keyCode:57,text:"("},{time:41443,type:"correct",shift:!1,alt:!1,keyCode:78,text:"n"},{time:41579,type:"correct",shift:!1,alt:!1,keyCode:85,text:"u"},{time:41827,type:"correct",shift:!1,alt:!1,keyCode:77,text:"m"},{time:42371,type:"correct",shift:!1,alt:!1,keyCode:32,text:" "},{time:42579,type:"correct",shift:!1,alt:!1,keyCode:187,text:"="},{time:42707,type:"correct",shift:!1,alt:!1,keyCode:187,text:"="},{time:43459,type:"correct",shift:!1,alt:!1,keyCode:32,text:" "},{time:43572,type:"correct",shift:!1,alt:!1,keyCode:48,text:"0"},{time:44556,type:"correct",shift:!0,alt:!1,keyCode:48,text:")"},{time:44844,type:"correct",shift:!1,alt:!1,keyCode:32,text:" "},{time:45076,type:"correct",shift:!0,alt:!1,keyCode:219,text:"{"},{time:45428,type:"correct",shift:!1,alt:!1,keyCode:13},{time:46036,type:"correct",shift:!1,alt:!1,keyCode:80,text:"p"},{time:46182,type:"correct",shift:!1,alt:!1,keyCode:82,text:"r"},{time:46284,type:"correct",shift:!1,alt:!1,keyCode:73,text:"i"},{time:46364,type:"correct",shift:!1,alt:!1,keyCode:78,text:"n"},{time:46492,type:"correct",shift:!1,alt:!1,keyCode:84,text:"t"},{time:47412,type:"correct",shift:!0,alt:!1,keyCode:57,text:"("},{time:47724,type:"correct",shift:!0,alt:!1,keyCode:222,text:'"'},{time:48468,type:"correct",shift:!1,alt:!1,keyCode:49,text:"1"},{time:48932,type:"correct",shift:!0,alt:!1,keyCode:222,text:'"'},{time:49420,type:"correct",shift:!0,alt:!1,keyCode:48,text:")"},{time:49884,type:"correct",shift:!1,alt:!1,keyCode:13},{time:50524,type:"correct",shift:!0,alt:!1,keyCode:221,text:"}"},{time:51341,type:"correct",shift:!1,alt:!1,keyCode:13},{time:52885,type:"correct",shift:!1,alt:!1,keyCode:32,text:" "},{time:53613,type:"correct",shift:!1,alt:!1,keyCode:69,text:"e"},{time:53725,type:"correct",shift:!1,alt:!1,keyCode:76,text:"l"},{time:53853,type:"correct",shift:!1,alt:!1,keyCode:83,text:"s"},{time:54004,type:"correct",shift:!1,alt:!1,keyCode:69,text:"e"},{time:54453,type:"correct",shift:!1,alt:!1,keyCode:32,text:" "},{time:54733,type:"correct",shift:!0,alt:!1,keyCode:219,text:"{"},{time:55133,type:"correct",shift:!1,alt:!1,keyCode:13},{time:55765,type:"correct",shift:!1,alt:!1,keyCode:70,text:"f"},{time:55869,type:"correct",shift:!1,alt:!1,keyCode:79,text:"o"},{time:56013,type:"correct",shift:!1,alt:!1,keyCode:82,text:"r"},{time:56285,type:"correct",shift:!0,alt:!1,keyCode:57,text:"("},{time:56861,type:"correct",shift:!1,alt:!1,keyCode:73,text:"i"},{time:57149,type:"correct",shift:!1,alt:!1,keyCode:32,text:" "},{time:57317,type:"correct",shift:!1,alt:!1,keyCode:73,text:"i"},{time:57405,type:"correct",shift:!1,alt:!1,keyCode:78,text:"n"},{time:57829,type:"mistake",shift:!1,alt:!1,keyCode:49,fixQueuePos:1,expectedText:" ",text:"1"},{time:58069,type:"backspace",shift:!1,alt:!1,keyCode:8,fixQueuePos:0},{time:58197,type:"correct",shift:!1,alt:!1,keyCode:32,text:" "},{time:58302,type:"correct",shift:!1,alt:!1,keyCode:49,text:"1"},{time:58653,type:"correct",shift:!0,alt:!1,keyCode:186,text:":"},{time:58973,type:"correct",shift:!1,alt:!1,keyCode:78,text:"n"},{time:59093,type:"correct",shift:!1,alt:!1,keyCode:85,text:"u"},{time:59325,type:"correct",shift:!1,alt:!1,keyCode:77,text:"m"},{time:60222,type:"correct",shift:!0,alt:!1,keyCode:48,text:")"},{time:60454,type:"correct",shift:!1,alt:!1,keyCode:32,text:" "},{time:61294,type:"correct",shift:!0,alt:!1,keyCode:219,text:"{"},{time:61606,type:"correct",shift:!1,alt:!1,keyCode:13},{time:62070,type:"correct",shift:!1,alt:!1,keyCode:70,text:"f"},{time:62158,type:"correct",shift:!1,alt:!1,keyCode:65,text:"a"},{time:62270,type:"correct",shift:!1,alt:!1,keyCode:67,text:"c"},{time:62478,type:"correct",shift:!1,alt:!1,keyCode:84,text:"t"},{time:62542,type:"correct",shift:!1,alt:!1,keyCode:79,text:"o"},{time:62670,type:"correct",shift:!1,alt:!1,keyCode:82,text:"r"},{time:62758,type:"correct",shift:!1,alt:!1,keyCode:73,text:"i"},{time:62926,type:"correct",shift:!1,alt:!1,keyCode:65,text:"a"},{time:63045,type:"correct",shift:!1,alt:!1,keyCode:76,text:"l"},{time:63230,type:"correct",shift:!1,alt:!1,keyCode:32,text:" "},{time:63334,type:"correct",shift:!1,alt:!1,keyCode:187,text:"="},{time:63486,type:"correct",shift:!1,alt:!1,keyCode:32,text:" "},{time:63731,type:"correct",shift:!1,alt:!1,keyCode:70,text:"f"},{time:63794,type:"correct",shift:!1,alt:!1,keyCode:65,text:"a"},{time:63898,type:"correct",shift:!1,alt:!1,keyCode:67,text:"c"},{time:64137,type:"correct",shift:!1,alt:!1,keyCode:84,text:"t"},{time:64190,type:"correct",shift:!1,alt:!1,keyCode:79,text:"o"},{time:64334,type:"correct",shift:!1,alt:!1,keyCode:82,text:"r"},{time:64454,type:"correct",shift:!1,alt:!1,keyCode:73,text:"i"},{time:64609,type:"correct",shift:!1,alt:!1,keyCode:65,text:"a"},{time:64726,type:"correct",shift:!1,alt:!1,keyCode:76,text:"l"},{time:65710,type:"correct",shift:!1,alt:!1,keyCode:32,text:" "},{time:66072,type:"correct",shift:!0,alt:!1,keyCode:56,text:"*"},{time:66775,type:"correct",shift:!1,alt:!1,keyCode:32,text:" "},{time:66878,type:"correct",shift:!1,alt:!1,keyCode:73,text:"i"},{time:67191,type:"correct",shift:!1,alt:!1,keyCode:13},{time:68007,type:"correct",shift:!0,alt:!1,keyCode:221,text:"}"},{time:68359,type:"correct",shift:!1,alt:!1,keyCode:13},{time:68895,type:"correct",shift:!1,alt:!1,keyCode:80,text:"p"},{time:69031,type:"correct",shift:!1,alt:!1,keyCode:82,text:"r"},{time:69111,type:"correct",shift:!1,alt:!1,keyCode:73,text:"i"},{time:69231,type:"correct",shift:!1,alt:!1,keyCode:78,text:"n"},{time:69383,type:"correct",shift:!1,alt:!1,keyCode:84,text:"t"},{time:69719,type:"mistake",shift:!0,alt:!1,keyCode:56,fixQueuePos:1,expectedText:"(",text:"*"},{time:70487,type:"backspace",shift:!1,alt:!1,keyCode:8,fixQueuePos:0},{time:71127,type:"correct",shift:!0,alt:!1,keyCode:57,text:"("},{time:72127,type:"correct",shift:!1,alt:!1,keyCode:80,text:"p"},{time:72247,type:"correct",shift:!1,alt:!1,keyCode:65,text:"a"},{time:72295,type:"correct",shift:!1,alt:!1,keyCode:83,text:"s"},{time:72479,type:"correct",shift:!1,alt:!1,keyCode:84,text:"t"},{time:72543,type:"correct",shift:!1,alt:!1,keyCode:69,text:"e"},{time:73399,type:"correct",shift:!0,alt:!1,keyCode:57,text:"("},{time:73767,type:"correct",shift:!1,alt:!1,keyCode:70,text:"f"},{time:73847,type:"correct",shift:!1,alt:!1,keyCode:65,text:"a"},{time:73983,type:"correct",shift:!1,alt:!1,keyCode:67,text:"c"},{time:74175,type:"correct",shift:!1,alt:!1,keyCode:84,text:"t"},{time:74255,type:"correct",shift:!1,alt:!1,keyCode:79,text:"o"},{time:74383,type:"correct",shift:!1,alt:!1,keyCode:82,text:"r"},{time:74488,type:"correct",shift:!1,alt:!1,keyCode:73,text:"i"},{time:74616,type:"correct",shift:!1,alt:!1,keyCode:65,text:"a"},{time:74751,type:"correct",shift:!1,alt:!1,keyCode:76,text:"l"},{time:75376,type:"correct",shift:!0,alt:!1,keyCode:48,text:")"},{time:75528,type:"correct",shift:!0,alt:!1,keyCode:48,text:")"},{time:76080,type:"correct",shift:!0,alt:!1,keyCode:221,text:"}"}],cheat:!1,firstCharTime:1597688868017,earlyFinish:!1,startTime:1597688867022,oneThirdCharsCount:103,oneThirdTime:34888,lastThirdCharsCount:53,lastThirdStartTime:61622,timeFromFirstInput:76782,codeLength:216,file:{languageName:"R",languageIndex:20,index:0,name:"factorial_of_a_number",source:"datamentor.io",tabSize:2,lines:12}};let Pe,$e;const Ie=()=>s.e("cmLoader").then(s.bind(null,"a0ca")).then(e=>(Pe=e.loadMode,$e=e.loadTheme,e.default));var Ae={components:{codemirror:Ie},data(){return{timeout:0,countdown:3,showPopUp:!0,popUpClickable:!1,popUpText:3,cm:{},codeText:"",started:!1,isCompleted:!1,cmReady:!1,toFix:0,rightMostMistakeMarked:!1,markers:[],currentLine:0,currentChar:0,correctCharsInLine:0,currentChange:{},stats:{history:[],cheat:!1,firstCharTime:0,earlyFinish:!1}}},computed:{...Object(g["b"])(["language","options","codeInfo","customCode","room"]),cmOptions(){return{showInvisibles:"Whitespace"===this.language.name,maxInvisibles:2,undoDepth:0,tabSize:this.tabWidth,styleActiveLine:!1,lineNumbers:this.options.lineNumbers,styleSelectedText:!0,lineWrapping:!0,matchBrackets:!1,dragDrop:!1,autoCloseBrackets:!1,cursorBlinkRate:320,smartIndent:!1,lint:!1,spellcheck:!1,autocorrect:!1,showCursorWhenSelecting:!0,theme:this.options.selectedTheme,cursorScrollMargin:100,readOnly:!0}},tabWidth(){return this.customCode.tabSize?this.customCode.tabSize:this.codeInfo.tabSize}},methods:{popUp(e,t=this.popUpText){this.popUpText=t,e?"Resume"===t&&(this.popUpClickable=!0):(this.popUpClickable=!1,this.cm.focus()),this.showPopUp=e},onCmReady(e){this.cm=e,this.init(),this.fixHeight()},onKeyDown(e){console.log(e);const t=()=>{const e=this.cm.getLine(this.currentLine);if(this.correctCharsInLine===e.length){if(this.cm.execCommand("goCharRight"),this.currentLine+=1,console.warn(this.currentLine),this.currentChange={...this.currentChange,type:"correct",text:"Enter"},this.stats.oneThirdTime||this.currentLine!==Math.floor(this.codeInfo.lines/3)){if(!this.stats.lastThirdStartTime&&this.currentLine===Math.floor(this.codeInfo.lines/3*2)){const e=this.cm.getRange({line:this.currentLine,ch:0},{line:this.codeInfo.lines+1,ch:0});console.blue(e),this.stats.lastThirdCharsCount=e.length,this.stats.lastThirdStartTime=this.timeElapsed()}}else{console.green("one third");const e=this.cm.getRange({line:0,ch:0},{line:this.currentLine,ch:0});console.blue(e),this.stats.oneThirdCharsCount=e.length,this.stats.oneThirdTime=this.timeElapsed()}if(this.options.autoIndent?(this.cm.execCommand("goLineStartSmart"),this.currentChar=this.cm.getCursor().ch,this.correctCharsInLine=this.currentChar):(this.currentChar=0,this.correctCharsInLine=0),this.options.underScore){let e=1;this.options.autoIndent||this.cm.getLine(this.currentLine).slice(0,this.tabWidth)!==Array(this.tabWidth).fill(" ").join("")||(e=this.tabWidth),this.cm.markText({line:this.currentLine,ch:this.currentChar},{line:this.currentLine,ch:this.currentChar+e},{className:"next-char",clearOnEnter:!0,inclusiveRight:!0})}}else console.error("enter blocked before end of the line"),this.currentChange={...this.currentChange,type:"blockedEnter"}},s=e=>{const t=this.cm.getLine(this.currentLine);if(console.log(t+"1"),this.currentChar!==t.length){let s=t[this.currentChar];console.blue(`expected: '${s}'`);let o=e;if("Tab"===e&&(o=Array(this.tabWidth).fill(" ").join(""),console.green(`tabText: '${o}'`)," "===s&&"Whitespace"!==this.language.name?(console.red(`test: '${t.slice(this.currentChart,this.currentChar+this.tabWidth)}'`),t.slice(this.currentChar,this.currentChar+this.tabWidth)===o&&(console.log("if"),s=o,console.red(`expectedText: '${o}'`))):"\t"===s&&(o="\t")),console.green(`text: '${o}'`),o===s)if(this.toFix)console.red("blocked unfixed mistakes: "+this.toFix),this.currentChange={...this.currentChange,type:"unfixed",text:o};else{if(this.cm.markText({line:this.currentLine,ch:this.currentChar},{line:this.currentLine,ch:this.currentChar+o.length},{className:"correct"}),this.currentChar+=o.length,this.correctCharsInLine+=o.length,this.currentChange={...this.currentChange,type:"correct",text:o},o.length>1){this.cm.startOperation();for(let e=0;e<o.length;e+=1)this.cm.execCommand("goCharRight");this.cm.endOperation()}else this.cm.execCommand("goCharRight");if(this.currentLine+1===this.codeInfo.lines&&this.correctCharsInLine===this.cm.getLine(this.currentLine).length)this.completed();else if(this.options.underScore&&this.currentChar!==t.length){let e=1;this.options.autoIndent||this.cm.getLine(this.currentLine).slice(this.currentChar,this.tabWidth+this.currentChar)!==Array(this.tabWidth).fill(" ").join("")||(e=this.tabWidth),this.cm.markText({line:this.currentLine,ch:this.currentChar},{line:this.currentLine,ch:this.currentChar+e},{className:"next-char",clearOnEnter:!0,inclusiveRight:!0})}}else{this.toFix+=1,console.red("wrong: "+this.toFix);const e=this.cm.markText({line:this.currentLine,ch:this.currentChar},{line:this.currentLine,ch:this.currentChar+o.length},{className:"mistake"});if(this.markers.push(e),this.currentChar+=o.length,this.currentChange={...this.currentChange,type:"mistake",fixQueuePos:this.toFix,expectedText:s,text:o},o.length>1){this.cm.startOperation();for(let e=0;e<o.length;e+=1)this.cm.execCommand("goCharRight");this.cm.endOperation()}else this.cm.execCommand("goCharRight")}}else this.currentChange={...this.currentChange,type:"lineEnd"},console.red("overshoot")};if(!("Shift"===e.key||"CapsLock"===e.key||"Alt"===e.key||"PageUp"===e.key||"PageDown"===e.key||"ScrollLock"===e.key||e.ctrlKey||e.metaKey||"Arrow"===e.key.slice(0,5)||e.key.length>1&&"F"===e.key[0])){if(this.started&&!this.stats.firstCharTime&&(this.stats.firstCharTime=Date.now()),this.currentChange={time:this.timeElapsed(),type:"initialType",shift:e.shiftKey,alt:e.altKey,keyCode:e.keyCode},"Escape"===e.key||"Pause"===e.key)this.popUp(!0,"Resume");else if("Insert"===e.key)this.cm.execCommand("goLineEnd"),this.cm.execCommand("goCharRight"),this.cm.markText({line:this.currentLine,ch:this.currentChar},{line:this.currentLine,ch:this.cm.getLine(this.currentLine).length+1},{className:"correct"}),this.currentLine+=1,this.currentChar=0,this.correctCharsInLine=0,this.stats.cheat=!0;else if("End"===e.key)this.stats.cheat=!0,this.completed(!0);else if("Home"===e.key)this.cm.execCommand("goDocEnd"),this.cm.markText({line:0,ch:0},{line:this.codeInfo.lines+1,ch:1},{className:"correct"}),this.currentLine=this.codeInfo.lines-1,this.currentChar=this.cm.getLine(this.currentLine),this.correctCharsInLine=this.currentChar,this.stats.cheat=!0,this.completed(!1,!1);else if("Enter"===e.key)t();else if("Backspace"===e.key)if(this.toFix){this.toFix-=1;const e=this.markers.pop();console.log(e);const t=e.find();console.log(t),e.clear();const s=t.to.ch-t.from.ch;if(s>1){this.cm.startOperation();for(let e=0;e<s;e+=1)this.cm.execCommand("goCharLeft");this.cm.endOperation()}else this.cm.execCommand("goCharLeft");if(console.blue("markerLength: "+s),this.currentChar-=s,this.currentChange={...this.currentChange,type:"backspace",fixQueuePos:this.toFix},console.blue("Deleted tofix: "+this.toFix),this.toFix>0)console.blue("TOFIX > 0"),this.rightMostMistakeMarked?(console.blue("middle"),this.cm.markText(t.from,t.to,{className:"corrected middle"})):(console.blue("rightMost"),this.cm.markText(t.from,t.to,{className:"corrected right-most"}),this.rightMostMistakeMarked=!0);else if(console.green(`TOFIX = 0 ${t.from.ch} ${t.to.ch}`),this.rightMostMistakeMarked?(console.blue("left-most"),this.rightMostMistakeMarked=!1,this.cm.markText(t.from,t.to,{className:"corrected left-most"})):(console.blue("alone"),this.cm.markText(t.from,t.to,{className:"corrected alone"})),this.options.underScore){let e=1;this.options.autoIndent||this.cm.getLine(this.currentLine).slice(this.currentChar,this.tabWidth+this.currentChar)!==Array(this.tabWidth).fill(" ").join("")||(e=this.tabWidth),this.cm.markText({line:this.currentLine,ch:this.currentChar},{line:this.currentLine,ch:this.currentChar+e},{className:"next-char",clearOnEnter:!0,inclusiveRight:!0})}}else console.blue("Blocked Nothing to fix"),this.currentChange={...this.currentChange,type:"blockedBackspace"};else s(e.key,e);"initialType"!==this.currentChange.type&&this.stats.history.push(this.currentChange),this.currentChange={}}},onUnFocus(e,t){!this.isCompleted&&t&&(null!==t.relatedTarget?"BUTTON"!==t.relatedTarget.tagName&&"A"!==t.relatedTarget.tagName?this.popUp(!0,"Resume"):"disconnect-btn"===t.relatedTarget.className&&this.cm.focus():this.popUp(!0,"Resume"))},fixHeight(){const e=this.$refs.code.offsetHeight+"px",t=this.$refs.codemirror.$el.getElementsByClassName("CodeMirror-scroll")[0];t.style.maxHeight=e},async getCode(){if(!this.codeInfo.name)return this.customCode.text;const e=`/code/${this.language.name.replace("#","_sharp")}/${this.codeInfo.name}.${this.language.ext}`;try{const t=await le.a.get(e);return t.data}catch(t){throw t.request?new Error("No internet"):t}},timeElapsed(){return Date.now()-this.stats.firstCharTime},start(e){clearInterval(e),this.cm.markText({line:0,ch:0},{line:this.codeInfo.lines+1,ch:1},{className:"bugfix"}),this.options.underScore&&this.cm.markText({line:this.currentLine,ch:this.currentChar},{line:this.currentLine,ch:this.currentChar+1},{className:"next-char",clearOnEnter:!0,inclusiveRight:!0}),this.popUp(!1,"WRITE"),this.started=!0,this.cm.focus(),console.log("START"),this.stats.startTime=Date.now()},init(){const e=Date.now(),t=setInterval(()=>{this.countdown-=.5,this.popUpText=Math.ceil(this.countdown),2===this.countdown?this.cmReady&&this.codeText||(this.countdown+=.5,console.warn(Date.now()-e),(Date.now()-e)/1e3<5?this.popUpText="Waiting for download...":(console.warn("Long loading time"),this.popUpText="It probably crashed but you can wait a few seconds just in case")):0===this.countdown&&this.start(t)},500);Promise.all([this.getCode(),$e(this.options.selectedTheme),Pe(this.cm,this.language.mode)]).then(e=>{[this.codeText]=e,this.cmReady=!0}).catch(e=>{clearInterval(t),console.log(e),"No internet"===e.message?this.popUpText="Connection with server not available.":this.popUpText="Please try again later"})},completed(e=!1,t=!0){"/results"===this.$route.path||e&&this.stats.history.length,this.cm.setOption("readOnly","nocursor"),this.popUp(!0,e?"Too long, uh?":"Congratulations"),this.room.connected&&this.$socket.client.emit("completed",Date.now()),t?(this.stats={...this.stats,timeFromFirstInput:this.timeElapsed(),codeLength:this.codeText.length,file:this.codeInfo},e&&(this.stats.earlyFinish=!0)):this.stats=Se,console.log(JSON.parse(JSON.stringify(this.stats))),this.$emit("completed",this.stats),this.isCompleted=!0,setTimeout(()=>{this.$router.replace("/results"),this.popUp(!1)},2e3)}}},Me=Ae,Ue=(s("a009"),Object(v["a"])(Me,Oe,Re,!1,null,"531547e4",null)),je=Ue.exports;const De=()=>s.e("results").then(s.bind(null,"b3c3"));var Fe={name:"Run",components:{CodeEditor:je,Results:De},data(){return{resetSelfKey:1,resetEditorKey:1,stats:!1,requestReset:!1}},computed:{...Object(g["b"])(["language","customCode","codeInfo","room"]),codeSource(){return this.codeInfo.name?"own"===this.codeInfo.source?"Łukasz Wielgus archive":this.codeInfo.source:this.room.connected&&!this.room.owner?"Code provided by room owner":"Code provided by You"},languageName(){return this.language.name.replace("_"," ")}},created(){this.language.name||this.$router.push("/")},beforeRouteUpdate(e,t,s){"/results"===e.path&&(console.green("scroll"),setTimeout(()=>{this.$refs.results.scrollIntoView({block:"start",inline:"nearest",behavior:"smooth"})},100)),s()},sockets:{reset(){this.requestReset=!0}},methods:{reset(){this.stats=!1,this.resetEditorKey+=1,"/results"===this.$route.path&&this.$router.push("/run")},resetSelf(){this.resetSelfKey+=1,"/results"===this.$route.path&&this.$router.push("/run")},finish(){this.$refs.codeEditor.completed(!0)},completed(e){this.stats=e},disconnect(){this.requestReset=!1,this.$socket.client.disconnect(),this.$store.commit("SET_ROOM_PROPERTY",["connected",!1])}}},Ye=Fe,We=(s("692f"),Object(v["a"])(Ye,Ne,Le,!1,null,"0f118d76",null)),Ke=We.exports;const ze=()=>s.e("about").then(s.bind(null,"f820")),Be=()=>s.e("contribute").then(s.bind(null,"61d5"));o["a"].use(W["a"]);const Qe=[{path:"/",name:"Start",component:xe},{path:"/about",name:"About",component:ze},{path:"/run",name:"Run",component:Ke,alias:"/results"},{path:"/contribute",name:"Contribute",component:Be},{path:"/join/:roomName",component:xe},{path:"*",component:Ee}],Ge=new W["a"]({mode:"history",routes:Qe});var He=Ge;const qe={userLanguage:!1,language:{index:null},options:{codeLength:!1,lineNumbers:!0,selectedTheme:"material-darker",selectedMode:1,autoIndent:!0,underScore:!0,mode:1}},Je={userLanguage:e=>e.userLanguage,language:e=>e.language,options:e=>e.options,getLanguage:e=>Object(G["b"])(e),getOption:e=>Object(G["b"])(e.options)},Ve={},Xe={USER_LANGUAGE:e=>{e.userLanguage=!e.userLanguage},SET_LANGUAGE:(e,t)=>{e.language=t},SET_OPTION:(e,{name:t,value:s})=>{e.options[t]=s},UPDATE_LANGUAGE(e,t){Object(G["c"])(e,t)},UPDATE_OPTION(e,t){Object(G["c"])(e.options,t)}};var Ze={state:qe,getters:Je,actions:Ve,mutations:Xe};const et={room:{connected:!1,name:"",players:{},myName:"",owner:!1}},tt={room:e=>e.room,players:e=>e.room.players},st={socket_playerDisconnected({commit:e},t){t.owner&&(e("SET_ROOM_PROPERTY",["connected",!1]),console.log(this),this._vm.$socket.client.disconnect()),e("PLAYER_LOST_CONNECTION",{playerName:t.playerName,currentState:"lostConnection"}),setTimeout(()=>{e("PLAYER_LOST_CONNECTION",{playerName:t.playerName,currentState:"disconnected"})},5e3)},socket_roomState({commit:e},t){e("SET_ROOM_PROPERTY",["name",t.roomName]),e("SET_ROOM_PROPERTY",["connected",!0]);const s={};t.players.forEach(({name:e,ready:t,connected:o,owner:i})=>{s[e]={ready:t,connected:o,owner:i}}),e("SET_ROOM_PROPERTY",["players",s]),Object.entries(t.options).forEach(t=>{e("SET_OPTION",t)})},socket_optionChange({commit:e},t){e("SET_OPTION",t)},socket_languageChange({commit:e,rootState:t},s){e("SET_LANGUAGE",t.other.languagesList[s])},socket_fileIndex({dispatch:e},t){e("generateCodeInfo",t)},socket_customCodeData({commit:e},t){e("SET_CUSTOM_CODE",t)},socket_useCustomCode({commit:e},t){e("USE_CUSTOM_CODE",t)},socket_reset({commit:e,state:t}){Object.keys(t.room.players).forEach(t=>{e("RESET_PLAYER",t)})}},ot={SOCKET_PLAYER_STATE_CHANGE(e,t){o["a"].set(e.room.players[t.playerName],"ready",t.currentState)},SOCKET_PLAYER_JOINED(e,t){console.log("JOIN"),o["a"].set(e.room.players,t,{ready:!1,connected:!0})},SOCKET_PLAYER_COMPLETED(e,t){o["a"].set(e.room.players[t.playerName],"completed",!0),o["a"].set(e.room.players[t.playerName],"time",t.time)},SOCKET_PLAYER_STATS(e,t){o["a"].set(e.room.players[t.playerName],"stats",t.stats)},PLAYER_LOST_CONNECTION(e,{playerName:t,currentState:s}){"lostConnection"===s?o["a"].set(e.room.players[t],"connected",!1):o["a"].delete(e.room.players,t)},RESET_PLAYER(e,t){o["a"].delete(e.room.players[t],"stats"),o["a"].delete(e.room.players[t],"completed"),o["a"].delete(e.room.players[t],"time")},LATENCY(e,t){e.room.ownerStartTime=t},SET_ROOM_PROPERTY(e,[t,s]){console.log(t,s),o["a"].set(e.room,t,s)}};var it={state:et,getters:tt,actions:st,mutations:ot};const rt={languagesList:[],customCode:{text:"",tabSize:0,lines:0,showEditor:!1},codeInfo:{},trackedContainers:[]},at={languagesList:e=>e.languagesList,customCode:e=>e.customCode,codeInfo:e=>e.codeInfo,trackedContainers:e=>e.trackedContainers},nt={loadLanguagesList:async e=>{if(!e.state.languagesList.length)try{const t=await le.a.get("/list.json"),s=t.data.languages.map((e,t)=>({...e,index:t}));e.commit("SET_LANGUAGES_LIST",s)}catch(t){console.warn("LANGUAGE LIST ERROR",t)}},deleteCustomCode:e=>{e.commit("SET_CUSTOM_CODE",{text:"",tabSize:0,lines:0,showEditor:!1})},generateCodeInfo:({state:e,rootState:t,commit:s},o)=>{let i={};-1===o?(i.tabSize=e.customCode.lines,i.lines=e.customCode.lines):i=t.options.language.files[o],i.index=o,i.languageIndex=t.options.language.index,i.languageName=t.options.language.name,s("SET_CODE_INFO",i)}},ct={SET_LANGUAGES_LIST:(e,t)=>{e.languagesList=t},SET_CUSTOM_CODE:(e,t)=>{e.customCode=t},USE_CUSTOM_CODE:(e,t)=>{console.log("use custom code"),o["a"].set(e.customCode,"showEditor",t)},SET_CODE_INFO(e,t){e.codeInfo=t},ADD_TRACKED_CONTAINER(e,t){e.trackedContainers.push(t)},REMOVE_TRACKED_CONTAINER(e,t){const s=e.trackedContainers.findIndex(e=>e.className===t);-1!==s&&e.trackedContainers.splice(s,1)}};var lt={state:rt,getters:at,actions:nt,mutations:ct};o["a"].use(g["a"]);var ht=new g["a"].Store({modules:{options:Ze,room:it,other:lt}});const dt=a()("/",{autoConnect:!1,reconnectionAttempts:3,timeout:1e4});n["c"].add(l["j"],l["f"],l["c"],l["d"],l["e"],l["b"],l["i"],l["h"],l["a"],l["g"]),o["a"].use(i["a"],dt,{store:ht}),o["a"].component("fa",c["a"]),o["a"].config.productionTip=!1,new o["a"]({router:He,store:ht,render(e){return e(Y)}}).$mount("#app"),window.addEventListener("message",e=>{e.data&&"webpackInvalid"===e.data.type&&console.clear()}),console.red=e=>{console.log("%c"+e,"color: #f44336")},console.green=e=>{console.log("%c"+e,"color: #00dd00")},console.blue=e=>{console.log("%c"+e,"color: #00cdff")}},"5a11":function(e,t,s){},"61dc":function(e,t,s){"use strict";var o=s("3243"),i=s.n(o);i.a},"63ca":function(e,t,s){},"692f":function(e,t,s){"use strict";var o=s("2e4a"),i=s.n(o);i.a},7447:function(e,t,s){"use strict";var o=s("63ca"),i=s.n(o);i.a},7629:function(e,t,s){"use strict";var o=s("3743"),i=s.n(o);i.a},"8c3e":function(e,t,s){},"941e":function(e,t,s){"use strict";var o=s("2f3e"),i=s.n(o);i.a},a009:function(e,t,s){"use strict";var o=s("5a11"),i=s.n(o);i.a},b341:function(e,t,s){"use strict";var o=s("3fc2"),i=s.n(o);i.a},c177:function(e,t,s){},cf25:function(e,t,s){"use strict";var o=s("fea6"),i=s.n(o);i.a},fea6:function(e,t,s){}});
//# sourceMappingURL=app.js.map